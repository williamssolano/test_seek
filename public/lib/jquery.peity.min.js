// Peity jQuery plugin version 0.4.1
// (c) 2010 Ben Pickles
//
// http://benpickles.github.com/peity/
//
// Released under MIT license.
(function(f,k){function l(a,f){var b=k.createElement("canvas");b.setAttribute("width",a);b.setAttribute("height",f);return b}var e=f.fn.peity=function(a,n){k.createElement("canvas").getContext&&this.each(function(){f(this).change(function(){var b=f.extend({},n),c=this;f.each(b,function(a,d){f.isFunction(d)&&(b[a]=d.call(c))});var g=f(this).html();e.graphers[a].call(this,f.extend({},e.defaults[a],b));f(this).trigger("chart:changed",g)}).trigger("change")});return this};e.graphers={};e.defaults={};
e.add=function(a,f,b){e.graphers[a]=b;e.defaults[a]=f};e.add("pie",{colours:["#FFF4DD","#FF9900"],delimeter:"/",radius:16},function(a){var e=f(this),b=a.radius/2,c=e.text().split(a.delimeter),g=parseFloat(c[0]),j=parseFloat(c[1]),c=-Math.PI/2,g=g/j*Math.PI*2,j=l(a.radius,a.radius),d=j.getContext("2d");d.beginPath();d.moveTo(b,b);d.arc(b,b,b,g+c,g==0?Math.PI*2:c,!1);d.fillStyle=a.colours[0];d.fill();d.beginPath();d.moveTo(b,b);d.arc(b,b,b,c,g+c,!1);d.fillStyle=a.colours[1];d.fill();e.wrapInner(f("<span>").hide()).append(j)});
e.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",strokeWidth:1,delimeter:",",height:16,max:null,width:32},function(a){var e=f(this),b=l(a.width,a.height),c=e.text().split(a.delimeter);c.length==1&&c.push(c[0]);var g=Math.max.apply(Math,c.concat([a.max])),g=a.height/g,j=a.width/(c.length-1),d=[],h,i=b.getContext("2d");i.beginPath();i.moveTo(0,a.height);for(h=0;h<c.length;h++){var k=h*j,m=a.height-g*c[h];d.push({x:k,y:m});i.lineTo(k,m)}i.lineTo(a.width,a.height);i.fillStyle=a.colour;i.fill();i.beginPath();
i.moveTo(0,d[0].y);for(h=0;h<d.length;h++)i.lineTo(d[h].x,d[h].y);i.lineWidth=a.strokeWidth;i.strokeStyle=a.strokeColour;i.stroke();e.wrapInner(f("<span>").hide()).append(b)});e.add("bar",{colour:"#4D89F9",delimeter:",",height:16,max:null,width:32},function(a){var e=f(this),b=l(a.width,a.height),c=e.text().split(a.delimeter),g=Math.max.apply(Math,c.concat([a.max])),g=a.height/g,j=a.width/c.length,d=b.getContext("2d");d.fillStyle=a.colour;for(var h=0;h<c.length;h++){var i=g*c[h];d.fillRect(h*j,a.height-
i,j,i)}e.wrapInner(f("<span>").hide()).append(b)})})(jQuery,document);
